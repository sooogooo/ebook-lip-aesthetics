<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”»å»Šç®¡ç†åå° - ç»›å”‡è§£è¯­èŠ±</title>
    <link rel="stylesheet" href="gallery.css">
    <style>
        /* ç®¡ç†åå°ä¸“ç”¨æ ·å¼ */
        .admin-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: var(--spacing-lg);
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-xl);
            padding: var(--spacing-lg);
            background: var(--surface);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-1);
        }

        .admin-title {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
            margin: 0;
        }

        .admin-actions {
            display: flex;
            gap: var(--spacing-md);
        }

        .admin-btn {
            padding: var(--spacing-md) var(--spacing-lg);
            border: none;
            border-radius: var(--radius-sm);
            background: var(--primary-color);
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--duration-normal);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .admin-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .admin-btn.secondary {
            background: var(--secondary-color);
        }

        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
        }

        .stat-card {
            background: var(--surface);
            padding: var(--spacing-lg);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-1);
            text-align: center;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: var(--spacing-sm);
        }

        .stat-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .upload-area {
            border: 2px dashed var(--divider);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xxl);
            text-align: center;
            margin-bottom: var(--spacing-xl);
            transition: all var(--duration-normal);
            cursor: pointer;
        }

        .upload-area:hover {
            border-color: var(--primary-color);
            background: var(--primary-light);
        }

        .upload-area.dragover {
            border-color: var(--primary-color);
            background: var(--primary-light);
            transform: scale(1.02);
        }

        .upload-icon {
            font-size: 3rem;
            color: var(--text-hint);
            margin-bottom: var(--spacing-md);
        }

        .upload-text {
            font-size: 1.125rem;
            color: var(--text-secondary);
            margin-bottom: var(--spacing-sm);
        }

        .upload-hint {
            font-size: 0.875rem;
            color: var(--text-hint);
        }

        .admin-table {
            background: var(--surface);
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-1);
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--spacing-lg);
            background: var(--primary-color);
            color: white;
        }

        .table-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin: 0;
        }

        .table-controls {
            display: flex;
            gap: var(--spacing-md);
        }

        .table-control {
            padding: var(--spacing-sm) var(--spacing-md);
            border: 1px solid rgba(255, 255, 255, 0.3);
            background: transparent;
            color: white;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: 0.875rem;
        }

        .table-control:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th,
        .data-table td {
            padding: var(--spacing-md);
            text-align: left;
            border-bottom: 1px solid var(--divider);
        }

        .data-table th {
            background: var(--background);
            font-weight: 600;
            color: var(--text-secondary);
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .data-table td {
            color: var(--text-primary);
        }

        .table-image {
            width: 60px;
            height: 45px;
            object-fit: cover;
            border-radius: var(--radius-sm);
        }

        .table-actions {
            display: flex;
            gap: var(--spacing-sm);
        }

        .table-action-btn {
            padding: var(--spacing-xs) var(--spacing-sm);
            border: none;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: 0.75rem;
            font-weight: 500;
            transition: all var(--duration-normal);
        }

        .table-action-btn.edit {
            background: var(--secondary-color);
            color: white;
        }

        .table-action-btn.delete {
            background: var(--error-color);
            color: white;
        }

        .table-action-btn:hover {
            transform: scale(1.05);
        }

        .status-badge {
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: var(--radius-sm);
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-published {
            background: var(--success-color);
            color: white;
        }

        .status-draft {
            background: var(--warning-color);
            color: white;
        }

        .status-archived {
            background: var(--text-hint);
            color: white;
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all var(--duration-normal);
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: var(--surface);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-4);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-lg);
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text-hint);
            cursor: pointer;
            padding: var(--spacing-xs);
            border-radius: var(--radius-sm);
        }

        .modal-close:hover {
            background: var(--divider);
        }

        .form-group {
            margin-bottom: var(--spacing-lg);
        }

        .form-label {
            display: block;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--spacing-sm);
        }

        .form-input,
        .form-textarea,
        .form-select {
            width: 100%;
            padding: var(--spacing-md);
            border: 1px solid var(--divider);
            border-radius: var(--radius-sm);
            background: var(--surface);
            color: var(--text-primary);
            font-size: 1rem;
            transition: border-color var(--duration-normal);
        }

        .form-input:focus,
        .form-textarea:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        .tag-input {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm);
            border: 1px solid var(--divider);
            border-radius: var(--radius-sm);
            background: var(--surface);
            min-height: 50px;
        }

        .tag-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            padding: var(--spacing-xs) var(--spacing-sm);
            background: var(--primary-color);
            color: white;
            border-radius: var(--radius-sm);
            font-size: 0.875rem;
        }

        .tag-remove {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 0.75rem;
            padding: 0;
            margin-left: var(--spacing-xs);
        }

        .tag-add-input {
            flex: 1;
            min-width: 120px;
            border: none;
            background: transparent;
            outline: none;
            color: var(--text-primary);
            font-size: 0.875rem;
        }

        .modal-actions {
            display: flex;
            justify-content: flex-end;
            gap: var(--spacing-md);
            margin-top: var(--spacing-xl);
        }

        .modal-btn {
            padding: var(--spacing-md) var(--spacing-lg);
            border: none;
            border-radius: var(--radius-sm);
            font-weight: 600;
            cursor: pointer;
            transition: all var(--duration-normal);
        }

        .modal-btn.primary {
            background: var(--primary-color);
            color: white;
        }

        .modal-btn.secondary {
            background: var(--divider);
            color: var(--text-primary);
        }

        .modal-btn:hover {
            transform: translateY(-2px);
        }

        @media (max-width: 768px) {
            .admin-header {
                flex-direction: column;
                gap: var(--spacing-md);
                align-items: stretch;
            }

            .admin-actions {
                justify-content: center;
            }

            .admin-stats {
                grid-template-columns: repeat(2, 1fr);
            }

            .data-table {
                font-size: 0.875rem;
            }

            .data-table th,
            .data-table td {
                padding: var(--spacing-sm);
            }

            .modal-content {
                margin: var(--spacing-md);
                width: calc(100% - 32px);
            }
        }
    </style>
</head>
<body>
    <div class="admin-container">
        <!-- å¤´éƒ¨ -->
        <header class="admin-header">
            <h1 class="admin-title">ğŸ“¸ ç”»å»Šç®¡ç†åå°</h1>
            <div class="admin-actions">
                <button class="admin-btn" onclick="openUploadModal()">
                    <span>ğŸ“¤</span>
                    æ‰¹é‡ä¸Šä¼ 
                </button>
                <button class="admin-btn secondary" onclick="exportData()">
                    <span>ğŸ“Š</span>
                    å¯¼å‡ºæ•°æ®
                </button>
                <button class="admin-btn secondary" onclick="openSettings()">
                    <span>âš™ï¸</span>
                    è®¾ç½®
                </button>
            </div>
        </header>

        <!-- ç»Ÿè®¡é¢æ¿ -->
        <div class="admin-stats">
            <div class="stat-card">
                <div class="stat-number" id="total-images">0</div>
                <div class="stat-label">æ€»å›¾ç‰‡æ•°</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="published-count">0</div>
                <div class="stat-label">å·²å‘å¸ƒ</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="draft-count">0</div>
                <div class="stat-label">è‰ç¨¿</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="total-views">0</div>
                <div class="stat-label">æ€»æµè§ˆé‡</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="avg-rating">0.0</div>
                <div class="stat-label">å¹³å‡è¯„åˆ†</div>
            </div>
        </div>

        <!-- ä¸Šä¼ åŒºåŸŸ -->
        <div class="upload-area" onclick="triggerFileUpload()" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)">
            <div class="upload-icon">ğŸ“</div>
            <div class="upload-text">ç‚¹å‡»æˆ–æ‹–æ‹½ä¸Šä¼ å›¾ç‰‡</div>
            <div class="upload-hint">æ”¯æŒ JPGã€PNGã€WebP æ ¼å¼ï¼Œå•æ–‡ä»¶æœ€å¤§ 10MB</div>
            <input type="file" id="file-upload" multiple accept="image/*" style="display: none;" onchange="handleFileSelect(event)">
        </div>

        <!-- æ•°æ®è¡¨æ ¼ -->
        <div class="admin-table">
            <div class="table-header">
                <h2 class="table-title">å›¾ç‰‡ç®¡ç†</h2>
                <div class="table-controls">
                    <select class="table-control" id="status-filter" onchange="filterByStatus()">
                        <option value="">å…¨éƒ¨çŠ¶æ€</option>
                        <option value="published">å·²å‘å¸ƒ</option>
                        <option value="draft">è‰ç¨¿</option>
                        <option value="archived">å·²å½’æ¡£</option>
                    </select>
                    <select class="table-control" id="type-filter" onchange="filterByType()">
                        <option value="">å…¨éƒ¨ç±»å‹</option>
                        <option value="before-after">å‰åå¯¹æ¯”</option>
                        <option value="process">æ²»ç–—è¿‡ç¨‹</option>
                        <option value="result">æœ€ç»ˆæ•ˆæœ</option>
                    </select>
                    <button class="table-control" onclick="refreshTable()">ğŸ”„ åˆ·æ–°</button>
                </div>
            </div>
            <table class="data-table">
                <thead>
                    <tr>
                        <th><input type="checkbox" id="select-all" onchange="toggleSelectAll()"></th>
                        <th>é¢„è§ˆ</th>
                        <th>æ ‡é¢˜</th>
                        <th>ç±»å‹</th>
                        <th>çŠ¶æ€</th>
                        <th>åŒ»ç”Ÿ</th>
                        <th>ä¸Šä¼ æ—¶é—´</th>
                        <th>æµè§ˆé‡</th>
                        <th>è¯„åˆ†</th>
                        <th>æ“ä½œ</th>
                    </tr>
                </thead>
                <tbody id="table-body">
                    <!-- æ•°æ®å°†é€šè¿‡ JavaScript åŠ¨æ€ç”Ÿæˆ -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- ç¼–è¾‘æ¨¡æ€æ¡† -->
    <div class="modal" id="edit-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">ç¼–è¾‘å›¾ç‰‡ä¿¡æ¯</h3>
                <button class="modal-close" onclick="closeModal('edit-modal')">&times;</button>
            </div>
            <form id="edit-form">
                <div class="form-group">
                    <label class="form-label">æ ‡é¢˜</label>
                    <input type="text" class="form-input" id="edit-title" required>
                </div>
                <div class="form-group">
                    <label class="form-label">æè¿°</label>
                    <textarea class="form-textarea" id="edit-description"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">æ²»ç–—ç±»å‹</label>
                    <select class="form-select" id="edit-type">
                        <option value="lip-filler">å”‡éƒ¨å¡«å……</option>
                        <option value="lip-reduction">å”‡éƒ¨ç¼©å°</option>
                        <option value="lip-lift">å”‡éƒ¨æå‡</option>
                        <option value="lip-reconstruction">å”‡éƒ¨é‡å»º</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">åŒ»ç”Ÿå§“å</label>
                    <input type="text" class="form-input" id="edit-doctor">
                </div>
                <div class="form-group">
                    <label class="form-label">è¯Šæ‰€åç§°</label>
                    <input type="text" class="form-input" id="edit-clinic">
                </div>
                <div class="form-group">
                    <label class="form-label">æ‚£è€…å¹´é¾„</label>
                    <input type="number" class="form-input" id="edit-age" min="18" max="80">
                </div>
                <div class="form-group">
                    <label class="form-label">æ ‡ç­¾</label>
                    <div class="tag-input" id="edit-tags">
                        <input type="text" class="tag-add-input" placeholder="è¾“å…¥æ ‡ç­¾åæŒ‰å›è½¦" onkeypress="addTag(event)">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">çŠ¶æ€</label>
                    <select class="form-select" id="edit-status">
                        <option value="draft">è‰ç¨¿</option>
                        <option value="published">å·²å‘å¸ƒ</option>
                        <option value="archived">å·²å½’æ¡£</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="button" class="modal-btn secondary" onclick="closeModal('edit-modal')">å–æ¶ˆ</button>
                    <button type="submit" class="modal-btn primary">ä¿å­˜æ›´æ”¹</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ä¸Šä¼ æ¨¡æ€æ¡† -->
    <div class="modal" id="upload-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">æ‰¹é‡ä¸Šä¼ å›¾ç‰‡</h3>
                <button class="modal-close" onclick="closeModal('upload-modal')">&times;</button>
            </div>
            <div class="upload-area" onclick="triggerBatchUpload()">
                <div class="upload-icon">ğŸ“¤</div>
                <div class="upload-text">é€‰æ‹©å¤šä¸ªæ–‡ä»¶ä¸Šä¼ </div>
                <div class="upload-hint">å¯ä»¥åŒæ—¶é€‰æ‹©å¤šä¸ªå›¾ç‰‡æ–‡ä»¶</div>
                <input type="file" id="batch-upload" multiple accept="image/*" style="display: none;" onchange="handleBatchUpload(event)">
            </div>
            <div id="upload-progress" style="display: none;">
                <div style="margin: 20px 0; padding: 10px; background: #f5f5f5; border-radius: 8px;">
                    <div>ä¸Šä¼ è¿›åº¦: <span id="progress-text">0/0</span></div>
                    <div style="background: #ddd; height: 20px; border-radius: 10px; margin-top: 10px;">
                        <div id="progress-bar" style="background: #E91E63; height: 100%; border-radius: 10px; width: 0%; transition: width 0.3s;"></div>
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button type="button" class="modal-btn secondary" onclick="closeModal('upload-modal')">å…³é—­</button>
            </div>
        </div>
    </div>

    <script>
        // æ¨¡æ‹Ÿæ•°æ®
        let galleryData = [
            {
                id: '1',
                title: 'è‡ªç„¶ä¸°å”‡æ¡ˆä¾‹ - å¼ å¥³å£«',
                description: '25å²å¥³æ€§ï¼Œè¿½æ±‚è‡ªç„¶é¥±æ»¡çš„å”‡å½¢æ•ˆæœ',
                type: 'lip-filler',
                status: 'published',
                doctor: 'æåŒ»ç”Ÿ',
                clinic: 'ç¾ä¸½è¯Šæ‰€',
                age: 25,
                uploadDate: '2024-03-15',
                views: 1234,
                rating: 4.8,
                tags: ['è‡ªç„¶', 'ä¸°å”‡', 'ç»å°¿é…¸'],
                imageUrl: 'https://via.placeholder.com/300x200/E91E63/FFFFFF?text=æ¡ˆä¾‹1'
            },
            {
                id: '2',
                title: 'å”‡éƒ¨é‡å»ºæ‰‹æœ¯ - ç‹å¥³å£«',
                description: 'æ„å¤–åˆ›ä¼¤åçš„å”‡éƒ¨é‡å»ºä¿®å¤',
                type: 'lip-reconstruction',
                status: 'published',
                doctor: 'é™ˆåŒ»ç”Ÿ',
                clinic: 'ä¸“ä¸šæ•´å½¢åŒ»é™¢',
                age: 32,
                uploadDate: '2024-03-10',
                views: 856,
                rating: 4.9,
                tags: ['é‡å»º', 'ä¿®å¤', 'åˆ›ä¼¤'],
                imageUrl: 'https://via.placeholder.com/300x200/2196F3/FFFFFF?text=æ¡ˆä¾‹2'
            },
            {
                id: '3',
                title: 'å”‡éƒ¨æå‡æœ¯ - åˆ˜å¥³å£«',
                description: 'æ”¹å–„å”‡éƒ¨ä¸‹å‚ï¼Œæå‡æ•´ä½“é¢éƒ¨å¹´è½»åŒ–',
                type: 'lip-lift',
                status: 'draft',
                doctor: 'å¼ åŒ»ç”Ÿ',
                clinic: 'æ—¶å°šç¾å®¹ä¸­å¿ƒ',
                age: 45,
                uploadDate: '2024-03-08',
                views: 423,
                rating: 4.6,
                tags: ['æå‡', 'æŠ—è¡°è€', 'å¹´è½»åŒ–'],
                imageUrl: 'https://via.placeholder.com/300x200/4CAF50/FFFFFF?text=æ¡ˆä¾‹3'
            }
        ];

        // å½“å‰ç¼–è¾‘çš„é¡¹ç›®ID
        let currentEditId = null;

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            updateStats();
            renderTable();
        });

        // æ›´æ–°ç»Ÿè®¡æ•°æ®
        function updateStats() {
            const totalImages = galleryData.length;
            const publishedCount = galleryData.filter(item => item.status === 'published').length;
            const draftCount = galleryData.filter(item => item.status === 'draft').length;
            const totalViews = galleryData.reduce((sum, item) => sum + item.views, 0);
            const avgRating = galleryData.reduce((sum, item) => sum + item.rating, 0) / totalImages;

            document.getElementById('total-images').textContent = totalImages;
            document.getElementById('published-count').textContent = publishedCount;
            document.getElementById('draft-count').textContent = draftCount;
            document.getElementById('total-views').textContent = totalViews.toLocaleString();
            document.getElementById('avg-rating').textContent = avgRating.toFixed(1);
        }

        // æ¸²æŸ“è¡¨æ ¼
        function renderTable() {
            const tbody = document.getElementById('table-body');
            tbody.innerHTML = '';

            galleryData.forEach(item => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><input type="checkbox" value="${item.id}" onchange="updateSelection()"></td>
                    <td><img src="${item.imageUrl}" alt="${item.title}" class="table-image"></td>
                    <td>${item.title}</td>
                    <td>${getTypeLabel(item.type)}</td>
                    <td><span class="status-badge status-${item.status}">${getStatusLabel(item.status)}</span></td>
                    <td>${item.doctor}</td>
                    <td>${item.uploadDate}</td>
                    <td>${item.views.toLocaleString()}</td>
                    <td>â­ ${item.rating}</td>
                    <td>
                        <div class="table-actions">
                            <button class="table-action-btn edit" onclick="editItem('${item.id}')">ç¼–è¾‘</button>
                            <button class="table-action-btn delete" onclick="deleteItem('${item.id}')">åˆ é™¤</button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // è·å–ç±»å‹æ ‡ç­¾
        function getTypeLabel(type) {
            const labels = {
                'lip-filler': 'å”‡éƒ¨å¡«å……',
                'lip-reduction': 'å”‡éƒ¨ç¼©å°',
                'lip-lift': 'å”‡éƒ¨æå‡',
                'lip-reconstruction': 'å”‡éƒ¨é‡å»º'
            };
            return labels[type] || type;
        }

        // è·å–çŠ¶æ€æ ‡ç­¾
        function getStatusLabel(status) {
            const labels = {
                'published': 'å·²å‘å¸ƒ',
                'draft': 'è‰ç¨¿',
                'archived': 'å·²å½’æ¡£'
            };
            return labels[status] || status;
        }

        // ç¼–è¾‘é¡¹ç›®
        function editItem(id) {
            const item = galleryData.find(item => item.id === id);
            if (!item) return;

            currentEditId = id;

            // å¡«å……è¡¨å•æ•°æ®
            document.getElementById('edit-title').value = item.title;
            document.getElementById('edit-description').value = item.description;
            document.getElementById('edit-type').value = item.type;
            document.getElementById('edit-doctor').value = item.doctor;
            document.getElementById('edit-clinic').value = item.clinic;
            document.getElementById('edit-age').value = item.age;
            document.getElementById('edit-status').value = item.status;

            // å¡«å……æ ‡ç­¾
            const tagsContainer = document.getElementById('edit-tags');
            tagsContainer.innerHTML = '';
            item.tags.forEach(tag => {
                addTagToContainer(tag, tagsContainer);
            });
            // æ·»åŠ è¾“å…¥æ¡†
            const input = document.createElement('input');
            input.type = 'text';
            input.className = 'tag-add-input';
            input.placeholder = 'è¾“å…¥æ ‡ç­¾åæŒ‰å›è½¦';
            input.onkeypress = addTag;
            tagsContainer.appendChild(input);

            openModal('edit-modal');
        }

        // åˆ é™¤é¡¹ç›®
        function deleteItem(id) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªé¡¹ç›®å—ï¼Ÿ')) {
                galleryData = galleryData.filter(item => item.id !== id);
                updateStats();
                renderTable();
            }
        }

        // æ·»åŠ æ ‡ç­¾åˆ°å®¹å™¨
        function addTagToContainer(tagText, container) {
            const tagElement = document.createElement('div');
            tagElement.className = 'tag-item';
            tagElement.innerHTML = `
                <span>${tagText}</span>
                <button type="button" class="tag-remove" onclick="removeTag(this)">Ã—</button>
            `;
            container.appendChild(tagElement);
        }

        // æ·»åŠ æ ‡ç­¾
        function addTag(event) {
            if (event.key === 'Enter') {
                event.preventDefault();
                const input = event.target;
                const tagText = input.value.trim();
                if (tagText) {
                    addTagToContainer(tagText, input.parentElement);
                    input.value = '';
                }
            }
        }

        // ç§»é™¤æ ‡ç­¾
        function removeTag(button) {
            button.parentElement.remove();
        }

        // æ‰“å¼€æ¨¡æ€æ¡†
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        // å…³é—­æ¨¡æ€æ¡†
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // æ‰“å¼€ä¸Šä¼ æ¨¡æ€æ¡†
        function openUploadModal() {
            openModal('upload-modal');
        }

        // è§¦å‘æ–‡ä»¶ä¸Šä¼ 
        function triggerFileUpload() {
            document.getElementById('file-upload').click();
        }

        // è§¦å‘æ‰¹é‡ä¸Šä¼ 
        function triggerBatchUpload() {
            document.getElementById('batch-upload').click();
        }

        // å¤„ç†æ–‡ä»¶é€‰æ‹©
        function handleFileSelect(event) {
            const files = event.target.files;
            if (files.length > 0) {
                uploadFiles(files);
            }
        }

        // å¤„ç†æ‰¹é‡ä¸Šä¼ 
        function handleBatchUpload(event) {
            const files = event.target.files;
            if (files.length > 0) {
                showUploadProgress();
                uploadFiles(files);
            }
        }

        // å¤„ç†æ‹–æ‹½
        function handleDragOver(event) {
            event.preventDefault();
            event.currentTarget.classList.add('dragover');
        }

        function handleDragLeave(event) {
            event.currentTarget.classList.remove('dragover');
        }

        function handleDrop(event) {
            event.preventDefault();
            event.currentTarget.classList.remove('dragover');
            const files = event.dataTransfer.files;
            if (files.length > 0) {
                uploadFiles(files);
            }
        }

        // æ˜¾ç¤ºä¸Šä¼ è¿›åº¦
        function showUploadProgress() {
            document.getElementById('upload-progress').style.display = 'block';
        }

        // ä¸Šä¼ æ–‡ä»¶
        function uploadFiles(files) {
            const totalFiles = files.length;
            let uploadedFiles = 0;

            Array.from(files).forEach((file, index) => {
                setTimeout(() => {
                    // æ¨¡æ‹Ÿä¸Šä¼ è¿‡ç¨‹
                    const newItem = {
                        id: Date.now() + '-' + index,
                        title: `æ–°ä¸Šä¼ å›¾ç‰‡ - ${file.name}`,
                        description: 'å¾…å®Œå–„æè¿°ä¿¡æ¯',
                        type: 'lip-filler',
                        status: 'draft',
                        doctor: 'å¾…åˆ†é…',
                        clinic: 'å¾…åˆ†é…',
                        age: 0,
                        uploadDate: new Date().toISOString().split('T')[0],
                        views: 0,
                        rating: 0,
                        tags: ['æ–°ä¸Šä¼ '],
                        imageUrl: URL.createObjectURL(file)
                    };

                    galleryData.unshift(newItem);
                    uploadedFiles++;

                    // æ›´æ–°è¿›åº¦
                    if (document.getElementById('upload-progress').style.display !== 'none') {
                        document.getElementById('progress-text').textContent = `${uploadedFiles}/${totalFiles}`;
                        document.getElementById('progress-bar').style.width = `${(uploadedFiles / totalFiles) * 100}%`;
                    }

                    // å®Œæˆæ—¶æ›´æ–°ç•Œé¢
                    if (uploadedFiles === totalFiles) {
                        updateStats();
                        renderTable();
                        setTimeout(() => {
                            if (document.getElementById('upload-modal').classList.contains('active')) {
                                document.getElementById('upload-progress').style.display = 'none';
                                document.getElementById('progress-bar').style.width = '0%';
                            }
                        }, 1000);
                    }
                }, index * 500); // æ¨¡æ‹Ÿä¸Šä¼ å»¶è¿Ÿ
            });
        }

        // è¡¨å•æäº¤å¤„ç†
        document.getElementById('edit-form').addEventListener('submit', function(event) {
            event.preventDefault();

            if (!currentEditId) return;

            const item = galleryData.find(item => item.id === currentEditId);
            if (!item) return;

            // æ›´æ–°æ•°æ®
            item.title = document.getElementById('edit-title').value;
            item.description = document.getElementById('edit-description').value;
            item.type = document.getElementById('edit-type').value;
            item.doctor = document.getElementById('edit-doctor').value;
            item.clinic = document.getElementById('edit-clinic').value;
            item.age = parseInt(document.getElementById('edit-age').value);
            item.status = document.getElementById('edit-status').value;

            // æ›´æ–°æ ‡ç­¾
            const tagElements = document.getElementById('edit-tags').querySelectorAll('.tag-item span');
            item.tags = Array.from(tagElements).map(span => span.textContent);

            updateStats();
            renderTable();
            closeModal('edit-modal');
        });

        // ç­›é€‰åŠŸèƒ½
        function filterByStatus() {
            // å®ç°çŠ¶æ€ç­›é€‰é€»è¾‘
            console.log('æŒ‰çŠ¶æ€ç­›é€‰');
        }

        function filterByType() {
            // å®ç°ç±»å‹ç­›é€‰é€»è¾‘
            console.log('æŒ‰ç±»å‹ç­›é€‰');
        }

        // åˆ·æ–°è¡¨æ ¼
        function refreshTable() {
            renderTable();
        }

        // å…¨é€‰åŠŸèƒ½
        function toggleSelectAll() {
            const selectAll = document.getElementById('select-all');
            const checkboxes = document.querySelectorAll('#table-body input[type="checkbox"]');
            checkboxes.forEach(checkbox => {
                checkbox.checked = selectAll.checked;
            });
            updateSelection();
        }

        // æ›´æ–°é€‰æ‹©çŠ¶æ€
        function updateSelection() {
            const checkboxes = document.querySelectorAll('#table-body input[type="checkbox"]');
            const checkedBoxes = document.querySelectorAll('#table-body input[type="checkbox"]:checked');
            const selectAll = document.getElementById('select-all');

            if (checkedBoxes.length === 0) {
                selectAll.indeterminate = false;
                selectAll.checked = false;
            } else if (checkedBoxes.length === checkboxes.length) {
                selectAll.indeterminate = false;
                selectAll.checked = true;
            } else {
                selectAll.indeterminate = true;
                selectAll.checked = false;
            }
        }

        // å¯¼å‡ºæ•°æ®
        function exportData() {
            const dataStr = JSON.stringify(galleryData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'gallery-data.json';
            link.click();
            URL.revokeObjectURL(url);
        }

        // æ‰“å¼€è®¾ç½®
        function openSettings() {
            alert('è®¾ç½®åŠŸèƒ½å¼€å‘ä¸­...');
        }
    </script>
</body>
</html>